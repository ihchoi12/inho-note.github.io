---
title: "Docker"
date: 2022-03-08
categories:
  - System
tags:
  - Docker
---


# Docker
- tool for running apps in an isolated environment
- similar as running apps in a VM (consistent environment regardless of the externel changes, sandbox different projects, portability)
- but docker is simpler than VM

## Docker VS VM
- Various linux distributions (ubuntu, mint, ...) implement different application layers on top of the same linux kernel layer
- Both Docker and VM are virtualization tool
- then, which parts of OS they virtualize?
- Docker: virtualizes application layer and uses the kernel of host (doesn't have it's own kernel)
- VM: has application layer and it's own kernel (virtualizes the complete OS), doesn't use host kernel
- docker container is 
  * much smaller
  * running faster: no need to load the OS kernel 
  * not compatible with different host kernel (cannot run linux based container on Windows), workaround: Docker Toolbox

## Install Docker on Linux
- Follow the docker docs official page (normally docker CE is enough)


## Docker File
- text file with a list of steps to perform to create an Image
- define an Image
- ex. configure OS => install some SW => copy project files => ..

## Image
- a way to package application with all necessary dependencies and configuration
- portable artifact (easily shared and moved around)
- obtained by building a docker file: a file containing layers of OS, software, application image layers
- typically form a stack (layers) of images (linux + app + ...)
- mostly, the base layer is Linux (alpine) for small size
 

## Container
- obtained by running an Image
- It's a running instance of Image
- A VM gets it's own full OS including kernel via the hypervisor, which uses quite many host resources 
- But container shares the OS with host (but everything on top of that is separated)
- a container is binded to a port which allows talking to application inside it
- has a virtual file system
- In docker, codes and environments are all wrapped inside a container 
- a container is stopped once the main process is stopped, so we should run one process in one container 

### Container repository
- a storage of containers
  * private repository
  * publick repository for docker (DockerHub)

## Volume
- to share or persist data between containers (or host)
- we can mount a local dir as a shared folder (volume) between a container and host

## Commands
- docker pull IMGNAME
  * pull imgage IMGNAME
- docker images
  * check all existing images
- docker run IMGNAME:VER
  * run image IMGNAME:VER into a container
  * in attached mode (ctrl+c to exit and terminate the container) 
  * if IMGNAME:VER doesn't exist on local, pull it from DockerHub then run
  * can see many lines of HASH: Downloading ... 
  * each line is one image (form layers altogether)
  * when pulling, existing image layers will not be downloaded againâ‚©
- docker ps
  * see all running containers
-

# nvidia-docker


##### References
[1] https://www.youtube.com/watch?v=YFl2mCHdv24
[2] nvidia-docker: https://www.youtube.com/watch?v=jdip_6vTw0s
[3] https://www.youtube.com/watch?v=3c-iBn73dDE (12:10)
